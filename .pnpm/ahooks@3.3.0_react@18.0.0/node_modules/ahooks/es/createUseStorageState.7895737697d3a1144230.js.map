{"version":3,"file":".pnpm/ahooks@3.3.0_react@18.0.0/node_modules/ahooks/es/createUseStorageState.7895737697d3a1144230.js","mappings":"8KAiCA,SAASA,EAAWC,GAClB,MAAsB,mBAARA,EAGT,SAASC,EAAsBC,GAgFpC,OA/EA,SAAyBC,EAAKC,GAC5B,IAAIC,EAEJ,IACEA,EAAUH,IACV,MAAOI,GACPC,QAAQC,MAAMF,GAGhB,IAAIG,EAAa,SAAoBC,GACnC,OAAIN,MAAAA,OAAyC,EAASA,EAAQK,YACrDL,MAAAA,OAAyC,EAASA,EAAQK,WAAWC,GAGvEC,KAAKC,UAAUF,IAWxB,SAASG,IACP,IACE,IAAIC,EAAMT,MAAAA,OAAyC,EAASA,EAAQU,QAAQZ,GAE5E,GAAIW,EACF,OAbmCJ,EAafI,GAZpBV,MAAAA,OAAyC,EAASA,EAAQY,cACrDZ,MAAAA,OAAyC,EAASA,EAAQY,aAAaN,GAGzEC,KAAKM,MAAMP,GAUhB,MAAOQ,GACPX,QAAQC,MAAMU,GAhBC,IAAsBR,EAmBvC,OAAIX,EAAWK,MAAAA,OAAyC,EAASA,EAAQe,cAChEf,MAAAA,OAAyC,EAASA,EAAQe,eAG5Df,MAAAA,OAAyC,EAASA,EAAQe,aAGnE,IAAIC,EAjF4B,SAAUC,EAAGC,GAC/C,IAAIC,EAAsB,mBAAXC,QAAyBH,EAAEG,OAAOC,UACjD,IAAKF,EAAG,OAAOF,EACf,IACIK,EAEAR,EAHAS,EAAIJ,EAAEK,KAAKP,GAEXQ,EAAK,GAGT,IACE,WAAc,IAANP,GAAgBA,KAAM,MAAQI,EAAIC,EAAEG,QAAQC,MAClDF,EAAGG,KAAKN,EAAEhB,OAEZ,MAAOF,GACPU,EAAI,CACFV,MAAOA,GAET,QACA,IACMkB,IAAMA,EAAEK,OAASR,EAAII,EAAU,SAAIJ,EAAEK,KAAKD,GAC9C,QACA,GAAIT,EAAG,MAAMA,EAAEV,OAInB,OAAOqB,EAyDII,EAAO,IAAAC,WAAS,WACvB,OAAOrB,OACL,GACAsB,EAAQf,EAAG,GACXgB,EAAWhB,EAAG,GA6BlB,OA3BA,QAAgB,WACdgB,EAASvB,OACR,CAACV,IAyBG,CAACgC,GAAO,QAvBG,SAAqBzB,GACrC,QAAqB,IAAVA,EACT0B,OAASC,GACThC,MAAAA,GAAkDA,EAAQiC,WAAWnC,QAChE,GAAIJ,EAAWW,GAAQ,CAC5B,IAAI6B,EAAe7B,EAAMyB,GAEzB,IACEC,EAASG,GACTlC,MAAAA,GAAkDA,EAAQmC,QAAQrC,EAAKM,EAAW8B,IAClF,MAAOrB,GACPX,QAAQC,MAAMU,SAGhB,IACEkB,EAAS1B,GACTL,MAAAA,GAAkDA,EAAQmC,QAAQrC,EAAKM,EAAWC,IAClF,MAAOQ,GACPX,QAAQC,MAAMU","sources":["webpack://tech-stack/./node_modules/.pnpm/ahooks@3.3.0_react@18.0.0/node_modules/ahooks/es/createUseStorageState/index.js"],"sourcesContent":["var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/* eslint-disable no-empty */\n\n\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\n\nfunction isFunction(obj) {\n  return typeof obj === 'function';\n}\n\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    var storage; // https://github.com/alibaba/hooks/issues/800\n\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n\n    var serializer = function serializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n\n      return JSON.stringify(value);\n    };\n\n    var deserializer = function deserializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n\n      return JSON.parse(value);\n    };\n\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n\n    var _a = __read(useState(function () {\n      return getStoredValue();\n    }), 2),\n        state = _a[0],\n        setState = _a[1];\n\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n\n    var updateState = function updateState(value) {\n      if (typeof value === 'undefined') {\n        setState(undefined);\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else if (isFunction(value)) {\n        var currentState = value(state);\n\n        try {\n          setState(currentState);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        try {\n          setState(value);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(value));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n\n    return [state, useMemoizedFn(updateState)];\n  }\n\n  return useStorageState;\n}"],"names":["isFunction","obj","createUseStorageState","getStorage","key","options","storage","err","console","error","serializer","value","JSON","stringify","getStoredValue","raw","getItem","deserializer","parse","e","defaultValue","_a","o","n","m","Symbol","iterator","r","i","call","ar","next","done","push","__read","useState","state","setState","undefined","removeItem","currentState","setItem"],"sourceRoot":""}