"use strict";(self.webpackChunkreact_antd_admin=self.webpackChunkreact_antd_admin||[]).push([[33],{5741:function(e,t,i){var n=i(9496),r=i(2182),a=i(6926),s=i(9586),o=i(1004),l=i(8953),u=i(2222),d=i(3684),c=i(4944),g=i(5047),f=i(5569),v=i(8592),h=i(2634),F="RC_FORM_INTERNAL_HOOKS",p=function(){(0,h.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},m=n.createContext({getFieldValue:p,getFieldsValue:p,getFieldError:p,getFieldWarning:p,getFieldsError:p,isFieldsTouched:p,isFieldTouched:p,isFieldValidating:p,isFieldsValidating:p,resetFields:p,setFields:p,setFieldsValue:p,validateFields:p,submit:p,getInternalHooks:function(){return p(),{dispatch:p,initEntityValue:p,registerField:p,useSubscribe:p,setInitialValues:p,setCallbacks:p,getFields:p,setValidateMessages:p,setPreserve:p,getInitialValue:p}}}),y=i(3460),V=i(4111),E=i(9948),P=["name"],Z=[];function k(e,t,i,n,r,a){return"function"==typeof e?e(t,i,"source"in a?{source:a.source}:{}):n!==r}var C=function(e){(0,g.Z)(i,e);var t=(0,f.Z)(i);function i(e){var r;return(0,u.Z)(this,i),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.prevValidating=void 0,r.errors=Z,r.warnings=Z,r.cancelRegister=function(){var e=r.props,t=e.preserve,i=e.isListField,n=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(i,t,(0,E.gU)(n)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,i=e.fieldContext.prefixName,n=void 0===i?[]:i;return void 0!==t?[].concat((0,l.Z)(n),(0,l.Z)(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,i=void 0===t?[]:t,n=e.fieldContext;return i.map((function(e){return"function"==typeof e?e(n):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.triggerMetaEvent=function(e){var t=r.props.onMetaChange;null==t||t((0,o.Z)((0,o.Z)({},r.getMeta()),{},{destroy:e}))},r.onStoreChange=function(e,t,i){var n=r.props,a=n.shouldUpdate,s=n.dependencies,o=void 0===s?[]:s,l=n.onReset,u=i.store,d=r.getNamePath(),c=r.getValue(e),g=r.getValue(u),f=t&&(0,E.T1)(t,d);switch("valueUpdate"===i.type&&"external"===i.source&&c!==g&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Z,r.warnings=Z,r.triggerMetaEvent()),i.type){case"reset":if(!t||f)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=Z,r.warnings=Z,r.triggerMetaEvent(),null==l||l(),void r.refresh();break;case"remove":if(a)return void r.reRender();break;case"setField":if(f){var v=i.data;return"touched"in v&&(r.touched=v.touched),"validating"in v&&!("originRCField"in v)&&(r.validatePromise=v.validating?Promise.resolve([]):null),"errors"in v&&(r.errors=v.errors||Z),"warnings"in v&&(r.warnings=v.warnings||Z),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(a&&!d.length&&k(a,e,u,c,g,i))return void r.reRender();break;case"dependenciesUpdate":if(o.map(E.gU).some((function(e){return(0,E.T1)(i.relatedFields,e)})))return void r.reRender();break;default:if(f||(!o.length||d.length||a)&&k(a,e,u,c,g,i))return void r.reRender()}!0===a&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),i=r.getValue(),n=Promise.resolve().then((function(){if(!r.mounted)return[];var a=r.props,s=a.validateFirst,o=void 0!==s&&s,u=a.messageVariables,d=(e||{}).triggerName,c=r.getRules();d&&(c=c.filter((function(e){var t=e.validateTrigger;return!t||(0,y.q)(t).includes(d)})));var g=(0,V.N)(t,i,c,e,o,u);return g.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;if(r.validatePromise===n){r.validatePromise=null;var t=[],i=[];e.forEach((function(e){var n=e.rule.warningOnly,r=e.errors,a=void 0===r?Z:r;n?i.push.apply(i,(0,l.Z)(a)):t.push.apply(t,(0,l.Z)(a))})),r.errors=t,r.warnings=i,r.triggerMetaEvent(),r.reRender()}})),g}));return r.validatePromise=n,r.dirty=!0,r.errors=Z,r.warnings=Z,r.triggerMetaEvent(),r.reRender(),n},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(F).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return(0,o.Z)((0,o.Z)({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var i=(0,v.Z)(e);return 1===i.length&&n.isValidElement(i[0])?{child:i[0],isFunction:!1}:{child:i,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,i=r.getNamePath();return(0,E.NA)(e||t(!0),i)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,i=t.trigger,n=t.validateTrigger,a=t.getValueFromEvent,l=t.normalize,u=t.valuePropName,d=t.getValueProps,c=t.fieldContext,g=void 0!==n?n:c.validateTrigger,f=r.getNamePath(),v=c.getInternalHooks,h=c.getFieldsValue,p=v(F),m=p.dispatch,V=r.getValue(),P=d||function(e){return(0,s.Z)({},u,e)},Z=e[i],k=(0,o.Z)((0,o.Z)({},e),P(V));k[i]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e=a?a.apply(void 0,i):E.iZ.apply(void 0,[u].concat(i)),l&&(e=l(e,V,h(!0))),m({type:"updateValue",namePath:f,value:e}),Z&&Z.apply(void 0,i)};var C=(0,y.q)(g||[]);return C.forEach((function(e){var t=k[e];k[e]=function(){t&&t.apply(void 0,arguments);var i=r.props.rules;i&&i.length&&m({type:"validateField",namePath:f,triggerName:e})}})),k},e.fieldContext&&(0,(0,e.fieldContext.getInternalHooks)(F).initEntityValue)((0,c.Z)(r)),r}return(0,d.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,i=e.fieldContext;if(this.mounted=!0,i){var n=(0,i.getInternalHooks)(F).registerField;this.cancelRegisterFunc=n(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,i=this.props.children,r=this.getOnlyChild(i),a=r.child;return r.isFunction?e=a:n.isValidElement(a)?e=n.cloneElement(a,this.getControlled(a.props)):((0,h.ZP)(!a,"`children` of Field is not validate ReactElement."),e=a),n.createElement(n.Fragment,{key:t},e)}}]),i}(n.Component);C.contextType=m,C.defaultProps={trigger:"onChange",valuePropName:"value"};var w=function(e){var t=e.name,i=(0,a.Z)(e,P),s=n.useContext(m),o=void 0!==t?(0,E.gU)(t):void 0,l="keep";return i.isListField||(l="_".concat((o||[]).join("_"))),n.createElement(C,(0,r.Z)({key:l,name:o},i,{fieldContext:s}))},b=n.createContext(null),N=i(6215),U=i(6952),M=i(8522),R=i(5290),I=i(8519),T=["name","errors"],A=(0,d.Z)((function e(t){var i=this;(0,u.Z)(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,getInternalHooks:i.getInternalHooks}},this.getInternalHooks=function(e){return e===F?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue}):((0,h.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){i.subscribable=e},this.setInitialValues=function(e,t){i.initialValues=e||{},t&&(i.store=(0,E.gg)({},i.store,e))},this.getInitialValue=function(e){return(0,I.Z)((0,E.NA)(i.initialValues,e))},this.setCallbacks=function(e){i.callbacks=e},this.setValidateMessages=function(e){i.validateMessages=e},this.setPreserve=function(e){i.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?i.fieldEntities.filter((function(e){return e.getNamePath().length})):i.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new M.Z;return i.getFieldEntities(e).forEach((function(e){var i=e.getNamePath();t.set(i,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return i.getFieldEntities(!0);var t=i.getFieldsMap(!0);return e.map((function(e){var i=(0,E.gU)(e);return t.get(i)||{INVALIDATE_NAME_PATH:(0,E.gU)(e)}}))},this.getFieldsValue=function(e,t){if(i.warningUnhooked(),!0===e&&!t)return i.store;var n=i.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),r=[];return n.forEach((function(i){var n,a="INVALIDATE_NAME_PATH"in i?i.INVALIDATE_NAME_PATH:i.getNamePath();if(e||!(null===(n=i.isListField)||void 0===n?void 0:n.call(i)))if(t){var s="getMeta"in i?i.getMeta():null;t(s)&&r.push(a)}else r.push(a)})),(0,E.H_)(i.store,r.map(E.gU))},this.getFieldValue=function(e){i.warningUnhooked();var t=(0,E.gU)(e);return(0,E.NA)(i.store,t)},this.getFieldsError=function(e){return i.warningUnhooked(),i.getFieldEntitiesForNamePathList(e).map((function(t,i){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:(0,E.gU)(e[i]),errors:[],warnings:[]}}))},this.getFieldError=function(e){i.warningUnhooked();var t=(0,E.gU)(e);return i.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){i.warningUnhooked();var t=(0,E.gU)(e);return i.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){i.warningUnhooked();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0],s=t[1],o=!1;0===t.length?r=null:1===t.length?Array.isArray(a)?(r=a.map(E.gU),o=!1):(r=null,o=a):(r=a.map(E.gU),o=s);var u=i.getFieldEntities(!0),d=function(e){return e.isFieldTouched()};if(!r)return o?u.every(d):u.some(d);var c=new M.Z;r.forEach((function(e){c.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();r.forEach((function(i){i.every((function(e,i){return t[i]===e}))&&c.update(i,(function(t){return[].concat((0,l.Z)(t),[e])}))}))}));var g=function(e){return e.some(d)},f=c.map((function(e){return e.value}));return o?f.every(g):f.some(g)},this.isFieldTouched=function(e){return i.warningUnhooked(),i.isFieldsTouched([e])},this.isFieldsValidating=function(e){i.warningUnhooked();var t=i.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var n=e.map(E.gU);return t.some((function(e){var t=e.getNamePath();return(0,E.T1)(n,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return i.warningUnhooked(),i.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new M.Z,n=i.getFieldEntities(!0);n.forEach((function(e){var i=e.props.initialValue,n=e.getNamePath();if(void 0!==i){var r=t.get(n)||new Set;r.add({entity:e,value:i}),t.set(n,r)}}));var r,a=function(n){n.forEach((function(n){if(void 0!==n.props.initialValue){var r=n.getNamePath();if(void 0!==i.getInitialValue(r))(0,h.ZP)(!1,"Form already set 'initialValues' with path '".concat(r.join("."),"'. Field can not overwrite it."));else{var a=t.get(r);if(a&&a.size>1)(0,h.ZP)(!1,"Multiple Field with path '".concat(r.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var s=i.getFieldValue(r);e.skipExist&&void 0!==s||(i.store=(0,E.sO)(i.store,r,(0,l.Z)(a)[0].value))}}}}))};e.entities?r=e.entities:e.namePathList?(r=[],e.namePathList.forEach((function(e){var i,n=t.get(e);n&&(i=r).push.apply(i,(0,l.Z)((0,l.Z)(n).map((function(e){return e.entity}))))}))):r=n,a(r)},this.resetFields=function(e){i.warningUnhooked();var t=i.store;if(!e)return i.store=(0,E.gg)({},i.initialValues),i.resetWithFieldInitialValue(),void i.notifyObservers(t,null,{type:"reset"});var n=e.map(E.gU);n.forEach((function(e){var t=i.getInitialValue(e);i.store=(0,E.sO)(i.store,e,t)})),i.resetWithFieldInitialValue({namePathList:n}),i.notifyObservers(t,n,{type:"reset"})},this.setFields=function(e){i.warningUnhooked();var t=i.store;e.forEach((function(e){var n=e.name,r=(e.errors,(0,a.Z)(e,T)),s=(0,E.gU)(n);"value"in r&&(i.store=(0,E.sO)(i.store,s,r.value)),i.notifyObservers(t,[s],{type:"setField",data:e})}))},this.getFields=function(){return i.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),n=e.getMeta(),r=(0,o.Z)((0,o.Z)({},n),{},{name:t,value:i.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var n=e.getNamePath();void 0===(0,E.NA)(i.store,n)&&(i.store=(0,E.sO)(i.store,n,t))}},this.registerField=function(e){if(i.fieldEntities.push(e),void 0!==e.props.initialValue){var t=i.store;i.resetWithFieldInitialValue({entities:[e],skipExist:!0}),i.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];i.fieldEntities=i.fieldEntities.filter((function(t){return t!==e}));var a=void 0!==n?n:i.preserve;if(!1===a&&(!t||r.length>1)){var s=e.getNamePath(),o=t?void 0:i.getInitialValue(s);if(s.length&&i.getFieldValue(s)!==o&&i.fieldEntities.every((function(e){return!(0,E.LX)(e.getNamePath(),s)}))){var l=i.store;i.store=(0,E.sO)(l,s,o,!0),i.notifyObservers(l,[s],{type:"remove"}),i.triggerDependenciesUpdate(l,s)}}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,n=e.value;i.updateValue(t,n);break;case"validateField":var r=e.namePath,a=e.triggerName;i.validateFields([r],{triggerName:a})}},this.notifyObservers=function(e,t,n){if(i.subscribable){var r=(0,o.Z)((0,o.Z)({},n),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach((function(i){(0,i.onStoreChange)(e,t,r)}))}else i.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var n=i.getDependencyChildrenFields(t);return n.length&&i.validateFields(n),i.notifyObservers(e,n,{type:"dependenciesUpdate",relatedFields:[t].concat((0,l.Z)(n))}),n},this.updateValue=function(e,t){var n=(0,E.gU)(e),r=i.store;i.store=(0,E.sO)(i.store,n,t),i.notifyObservers(r,[n],{type:"valueUpdate",source:"internal"});var a=i.triggerDependenciesUpdate(r,n),s=i.callbacks.onValuesChange;s&&s((0,E.H_)(i.store,[n]),i.getFieldsValue()),i.triggerOnFieldsChange([n].concat((0,l.Z)(a)))},this.setFieldsValue=function(e){i.warningUnhooked();var t=i.store;e&&(i.store=(0,E.gg)(i.store,e)),i.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,n=[],r=new M.Z;return i.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var i=(0,E.gU)(t);r.update(i,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))})),function e(i){(r.get(i)||new Set).forEach((function(i){if(!t.has(i)){t.add(i);var r=i.getNamePath();i.isFieldDirty()&&r.length&&(n.push(r),e(r))}}))}(e),n},this.triggerOnFieldsChange=function(e,t){var n=i.callbacks.onFieldsChange;if(n){var r=i.getFields();if(t){var a=new M.Z;t.forEach((function(e){var t=e.name,i=e.errors;a.set(t,i)})),r.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}n(r.filter((function(t){var i=t.name;return(0,E.T1)(e,i)})),r)}},this.validateFields=function(e,t){i.warningUnhooked();var n=!!e,r=n?e.map(E.gU):[],a=[];i.getFieldEntities(!0).forEach((function(s){if(n||r.push(s.getNamePath()),(null==t?void 0:t.recursive)&&n){var u=s.getNamePath();u.every((function(t,i){return e[i]===t||void 0===e[i]}))&&r.push(u)}if(s.props.rules&&s.props.rules.length){var d=s.getNamePath();if(!n||(0,E.T1)(r,d)){var c=s.validateRules((0,o.Z)({validateMessages:(0,o.Z)((0,o.Z)({},R.y),i.validateMessages)},t));a.push(c.then((function(){return{name:d,errors:[],warnings:[]}})).catch((function(e){var t=[],i=[];return e.forEach((function(e){var n=e.rule.warningOnly,r=e.errors;n?i.push.apply(i,(0,l.Z)(r)):t.push.apply(t,(0,l.Z)(r))})),t.length?Promise.reject({name:d,errors:t,warnings:i}):{name:d,errors:t,warnings:i}})))}}}));var s=(0,U.v)(a);i.lastValidatePromise=s,s.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));i.notifyObservers(i.store,t,{type:"validateFinish"}),i.triggerOnFieldsChange(t,e)}));var u=s.then((function(){return i.lastValidatePromise===s?Promise.resolve(i.getFieldsValue(r)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i.getFieldsValue(r),errorFields:t,outOfDate:i.lastValidatePromise!==s})}));return u.catch((function(e){return e})),u},this.submit=function(){i.warningUnhooked(),i.validateFields().then((function(e){var t=i.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=i.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t})),O=function(e){var t=n.useRef(),i=n.useState({}),r=(0,N.Z)(i,2)[1];if(!t.current)if(e)t.current=e;else{var a=new A((function(){r({})}));t.current=a.getForm()}return[t.current]},x=n.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),L=x,H=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],_=function(e,t){var i=e.name,s=e.initialValues,l=e.fields,u=e.form,d=e.preserve,c=e.children,g=e.component,f=void 0===g?"form":g,v=e.validateMessages,h=e.validateTrigger,p=void 0===h?"onChange":h,y=e.onValuesChange,V=e.onFieldsChange,P=e.onFinish,Z=e.onFinishFailed,k=(0,a.Z)(e,H),C=n.useContext(L),w=O(u),b=(0,N.Z)(w,1)[0],U=b.getInternalHooks(F),M=U.useSubscribe,R=U.setInitialValues,I=U.setCallbacks,T=U.setValidateMessages,A=U.setPreserve;n.useImperativeHandle(t,(function(){return b})),n.useEffect((function(){return C.registerForm(i,b),function(){C.unregisterForm(i)}}),[C,b,i]),T((0,o.Z)((0,o.Z)({},C.validateMessages),v)),I({onValuesChange:y,onFieldsChange:function(e){if(C.triggerFormChange(i,e),V){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];V.apply(void 0,[e].concat(n))}},onFinish:function(e){C.triggerFormFinish(i,e),P&&P(e)},onFinishFailed:Z}),A(d);var x=n.useRef(null);R(s,!x.current),x.current||(x.current=!0);var _=c,S="function"==typeof c;S&&(_=c(b.getFieldsValue(!0),b)),M(!S);var D=n.useRef();n.useEffect((function(){(0,E.T0)(D.current||[],l||[])||b.setFields(l||[]),D.current=l}),[l,b]);var W=n.useMemo((function(){return(0,o.Z)((0,o.Z)({},b),{},{validateTrigger:p})}),[b,p]),j=n.createElement(m.Provider,{value:W},_);return!1===f?j:n.createElement(f,(0,r.Z)({},k,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),b.submit()},onReset:function(e){var t;e.preventDefault(),b.resetFields(),null===(t=k.onReset)||void 0===t||t.call(k,e)}}),j)},S=n.forwardRef(_);S.FormProvider=function(e){var t=e.validateMessages,i=e.onFormChange,r=e.onFormFinish,a=e.children,l=n.useContext(x),u=n.useRef({});return n.createElement(x.Provider,{value:(0,o.Z)((0,o.Z)({},l),{},{validateMessages:(0,o.Z)((0,o.Z)({},l.validateMessages),t),triggerFormChange:function(e,t){i&&i(e,{changedFields:t,forms:u.current}),l.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:u.current}),l.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(u.current=(0,o.Z)((0,o.Z)({},u.current),{},(0,s.Z)({},e,t))),l.registerForm(e,t)},unregisterForm:function(e){var t=(0,o.Z)({},u.current);delete t[e],u.current=t,l.unregisterForm(e)}})},a)},S.Field=w,S.List=function(e){var t=e.name,i=e.initialValue,r=e.children,a=e.rules,s=e.validateTrigger,u=n.useContext(m),d=n.useRef({keys:[],id:0}).current,c=n.useMemo((function(){var e=(0,E.gU)(u.prefixName)||[];return[].concat((0,l.Z)(e),(0,l.Z)((0,E.gU)(t)))}),[u.prefixName,t]),g=n.useMemo((function(){return(0,o.Z)((0,o.Z)({},u),{},{prefixName:c})}),[u,c]),f=n.useMemo((function(){return{getKey:function(e){var t=c.length,i=e[t];return[d.keys[i],e.slice(t+1)]}}}),[c]);return"function"!=typeof r?((0,h.ZP)(!1,"Form.List only accepts function as children."),null):n.createElement(b.Provider,{value:f},n.createElement(m.Provider,{value:g},n.createElement(w,{name:[],shouldUpdate:function(e,t,i){return"internal"!==i.source&&e!==t},rules:a,validateTrigger:s,initialValue:i,isList:!0},(function(e,t){var i=e.value,n=void 0===i?[]:i,a=e.onChange,s=u.getFieldValue,o=function(){return s(c||[])||[]},g={add:function(e,t){var i=o();t>=0&&t<=i.length?(d.keys=[].concat((0,l.Z)(d.keys.slice(0,t)),[d.id],(0,l.Z)(d.keys.slice(t))),a([].concat((0,l.Z)(i.slice(0,t)),[e],(0,l.Z)(i.slice(t))))):(d.keys=[].concat((0,l.Z)(d.keys),[d.id]),a([].concat((0,l.Z)(i),[e]))),d.id+=1},remove:function(e){var t=o(),i=new Set(Array.isArray(e)?e:[e]);i.size<=0||(d.keys=d.keys.filter((function(e,t){return!i.has(t)})),a(t.filter((function(e,t){return!i.has(t)}))))},move:function(e,t){if(e!==t){var i=o();e<0||e>=i.length||t<0||t>=i.length||(d.keys=(0,E.pB)(d.keys,e,t),a((0,E.pB)(i,e,t)))}}},f=n||[];return Array.isArray(f)||(f=[]),r(f.map((function(e,t){var i=d.keys[t];return void 0===i&&(d.keys[t]=d.id,i=d.keys[t],d.id+=1),{name:t,key:i,isListField:!0}})),g,t)}))))},S.useForm=O}}]);
//# sourceMappingURL=es.4fb83c3d6e434a377517.js.map